# Bloated tables - tables with high dead tuple ratio
# Report with threshold filtering and title interpolation

report:
  name: bloated_tables
  module: tables
  description: "Tables with high dead tuple ratio"

  sql:
    category: tables
    file: bloated_tables

  title: "Bloated Tables (bloat >= ${threshold}%)"
  title_vars:
    threshold:
      source: config
      key: bloat_threshold_percent

  columns:
    - schema
    - table_name
    - live_rows
    - dead_rows
    - bloat_percent
    - table_size_mb

  parameters:
    limit:
      type: integer
      default: 20
      description: "Maximum number of results"

  filters:
    - field: bloat_percent
      operator: gte
      value:
        source: config
        key: bloat_threshold_percent
      cast: float

  problem_explanations:
    dead_tuple_ratio: many_dead_tuples
    n_dead_tup: many_dead_tuples
